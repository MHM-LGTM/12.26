# 快速启动 - 阶段一测试

## 🚀 一键启动指南

### 步骤 1：启动后端（终端1）
```bash
cd /www/wwwroot/physmath.cn/my-project49
source myenv/bin/activate
cd backend
uvicorn app.main:app --reload --host 0.0.0.0 --port 8000
```

**等待看到：**
```
INFO:     Application startup complete.
INFO:     Uvicorn running on http://0.0.0.0:8000
```

---

### 步骤 2：启动前端（终端2 - 新终端）
```bash
cd /www/wwwroot/physmath.cn/my-project49/frontend
npm run dev
```

**等待看到：**
```
VITE v5.x.x  ready in xxx ms

➜  Local:   http://localhost:5174/
➜  Network: http://x.x.x.x:5174/
```

---

### 步骤 3：测试功能

#### 3.1 打开浏览器
访问：`http://localhost:5174/`

#### 3.2 登录
- 点击右上角"登录/注册"
- 输入手机号：`13116929960`
- 输入密码：你的密码
- 点击登录

#### 3.3 运行模拟
1. 上传一张物理场景图片
2. 框选元素并分配标签
3. 点击"开始模拟"按钮
4. 观察模拟运行

#### 3.4 保存动画 ⭐
1. 模拟运行后，看到"⬇️ 下载动画"按钮
2. 点击按钮
3. 在弹窗中输入动画名称（例如："碰撞测试"）
4. 点击"保存"
5. 等待提示"✅ 保存成功！"

#### 3.5 验证数据库
打开新终端：
```bash
cd /www/wwwroot/physmath.cn/my-project49
sqlite3 backend/sql_app.db

# 在 SQLite 提示符下：
SELECT id, title, created_at FROM animations;

# 退出
.quit
```

**应该看到：**
```
1|碰撞测试|2025-12-11 19:xx:xx
```

---

## ✅ 验收清单

快速检查：
- [ ] 后端启动成功，无报错
- [ ] 前端启动成功，无报错
- [ ] 能正常登录
- [ ] 能运行物理模拟
- [ ] 看到"下载动画"按钮
- [ ] 点击按钮弹出弹窗
- [ ] 保存成功并有提示
- [ ] 数据库中有记录

---

## 🐛 常见问题

### Q1: 后端启动报错 "Address already in use"
**解决：**
```bash
# 查找占用 8000 端口的进程
lsof -i :8000

# 杀死进程（替换 PID）
kill -9 <PID>

# 或者换个端口
uvicorn app.main:app --reload --port 8001
```

### Q2: 前端启动报错 "EADDRINUSE"
**解决：**
```bash
# 杀死占用 5174 端口的进程
lsof -i :5174
kill -9 <PID>
```

### Q3: 登录后看不到保存按钮
**解决：**
- 确保运行了模拟（点击"开始模拟"）
- 打开浏览器控制台查看是否有报错
- 检查 canDownload 状态是否为 true

### Q4: 保存时提示 401 错误
**解决：**
- 确认已登录
- 检查 localStorage 中是否有 token
- 重新登录

---

## 📸 截图建议

建议截图保存：
1. 下载按钮显示效果
2. 保存弹窗界面
3. 保存成功提示
4. 数据库查询结果

保存到：`screenshots/stage1/`

---

## 🎉 完成后

恭喜！阶段一测试完成。

**下一步选择：**

1. **立即开始阶段二**
   - 继续实施"我的动画面板"功能
   - 实现动画加载和运行

2. **先休息一下**
   - 阶段一已经是一个完整的里程碑
   - 随时可以开始阶段二

**需要帮助？**
- 查看 `阶段一验收测试.md` 详细测试文档
- 查看 `阶段一完成总结.md` 了解实现细节
- 随时反馈问题！

---

**祝测试顺利！** 🚀

