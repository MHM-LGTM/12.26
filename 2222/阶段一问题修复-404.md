# 阶段一问题修复 - 404错误

## 🐛 问题分析

### 错误信息
```
POST /api/animations/6/publish?show_author=true HTTP/1.1" 404 Not Found
GET /api/plaza/animations HTTP/1.1" 404 Not Found
```

### 原因
后端代码已经修改（添加了新接口），但后端服务没有重启，所以新接口还没有生效。

---

## ✅ 解决方案

### 方法一：重启后端（推荐）
因为 uvicorn 使用了 `--reload` 参数，理论上应该自动重启。但如果没有自动重启，手动重启：

```bash
# 在后端终端按 Ctrl+C 停止
# 然后重新启动：
cd /www/wwwroot/physmath.cn/my-project49
source myenv/bin/activate
cd backend
uvicorn app.main:app --reload --host 0.0.0.0 --port 8000
```

### 方法二：检查文件监听
如果自动reload没生效，可能是因为：
1. 文件在监听范围外
2. uvicorn 版本问题

**解决：** 手动重启一次即可

---

## 🧪 验证步骤

### 1. 重启后端后，检查日志
应该看到：
```
INFO: Application startup complete.
INFO: Uvicorn running on http://0.0.0.0:8000
```

### 2. 测试接口
在浏览器中访问：
```
http://localhost:8000/api/plaza/animations
```

应该返回：
```json
{
  "code": 0,
  "message": "success",
  "data": {
    "animations": [...]
  }
}
```

### 3. 重新测试上传
1. 刷新前端页面
2. 点击卡片"⋯" → "上传到广场"
3. 应该成功

---

## 📝 快速测试命令

```bash
# 测试广场列表接口
curl http://localhost:8000/api/plaza/animations

# 测试发布接口（需要token）
curl -X POST http://localhost:8000/api/animations/1/publish \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -H "Content-Type: application/json"
```

---

## ✅ 验证成功标准

- [ ] 后端启动无报错
- [ ] 访问 `/api/plaza/animations` 返回数据
- [ ] 点击"上传到广场"成功
- [ ] 保存动画后弹出询问
- [ ] "上传到广场"按钮点击后成功

---

**重启后端即可解决！** 🚀

